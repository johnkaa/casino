import{r as F,U as S,N as W,ak as T,al as g,H as q,am as x}from"./Ad6pFb1Y.js";function d(n){return T()?(g(n),!0):!1}function v(n){return typeof n=="function"?n():q(n)}const w=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const A=()=>+Date.now(),b=()=>{};function C(n,s){function a(...o){return new Promise((r,i)=>{Promise.resolve(n(()=>s.apply(this,o),{fn:s,thisArg:this,args:o})).then(r).catch(i)})}return a}function D(n,s={}){let a,o,r=b;const i=t=>{clearTimeout(t),r(),r=b};return t=>{const e=v(n),u=v(s.maxWait);return a&&i(a),e<=0||u!==void 0&&u<=0?(o&&(i(o),o=null),Promise.resolve(t())):new Promise((l,m)=>{r=s.rejectOnCancel?m:l,u&&!o&&(o=setTimeout(()=>{a&&i(a),o=null,l(t())},u)),a=setTimeout(()=>{o&&i(o),o=null,l(t())},e)})}}function R(n,s=200,a={}){return C(D(s,a),n)}function _(n,s=1e3,a={}){const{immediate:o=!0,immediateCallback:r=!1}=a;let i=null;const c=F(!1);function t(){i&&(clearInterval(i),i=null)}function e(){c.value=!1,t()}function u(){const l=v(s);l<=0||(c.value=!0,r&&n(),t(),i=setInterval(n,l))}if(o&&w&&u(),S(s)||typeof s=="function"){const l=W(s,()=>{c.value&&w&&u()});d(l)}return d(e),{isActive:c,pause:e,resume:u}}const y=w?window:void 0;function I(n,s={}){const{immediate:a=!0,fpsLimit:o=void 0,window:r=y}=s,i=F(!1),c=o?1e3/o:null;let t=0,e=null;function u(p){if(!i.value||!r)return;t||(t=p);const h=p-t;if(c&&h<c){e=r.requestAnimationFrame(u);return}t=p,n({delta:h,timestamp:p}),e=r.requestAnimationFrame(u)}function l(){!i.value&&r&&(i.value=!0,t=0,e=r.requestAnimationFrame(u))}function m(){i.value=!1,e!=null&&r&&(r.cancelAnimationFrame(e),e=null)}return a&&l(),d(m),{isActive:x(i),pause:m,resume:l}}const f=new Map;function j(n){const s=T();function a(t){var e;const u=f.get(n)||new Set;u.add(t),f.set(n,u);const l=()=>r(t);return(e=s==null?void 0:s.cleanups)==null||e.push(l),l}function o(t){function e(...u){r(e),t(...u)}return a(e)}function r(t){const e=f.get(n);e&&(e.delete(t),e.size||i())}function i(){f.delete(n)}function c(t,e){var u;(u=f.get(n))==null||u.forEach(l=>l(t,e))}return{on:a,once:o,off:r,emit:c,reset:i}}function E(n={}){const{controls:s=!1,offset:a=0,immediate:o=!0,interval:r="requestAnimationFrame",callback:i}=n,c=F(A()+a),t=()=>c.value=A()+a,e=i?()=>{t(),i(c.value)}:t,u=r==="requestAnimationFrame"?I(e,{immediate:o}):_(e,r,{immediate:o});return s?{timestamp:c,...u}:c}export{j as a,E as b,R as u};
